$(function(){$(".adminCheckboxRow").on("change",function(e){var t=$(this),n=t.closest("tr");t.is(":checked")?n.addClass("info"):n.removeClass("info")}),$(".adminCheckboxAll").on("change",function(){var e=$(this),t=$(".adminCheckboxRow");e.is(":checked")?t.not(":checked").each(function(e,t){this.checked=!0,$(this).trigger("change")}):t.filter(":checked").each(function(e,t){this.checked=!1,$(this).trigger("change")})})}),$(function(){$(document).delegate(".btn-delete","click",function(e){e.preventDefault();var t=$(this).closest("form");bootbox.confirm(window.Admin.Settings.lang.table["delete-confirm"],function(e){e&&t.submit()})}),bootbox.setDefaults("locale",window.Admin.Settings.locale)}),$(function(){$(document).delegate('*[data-toggle="lightbox"]',"click",function(e){e.preventDefault(),$(this).ekkoLightbox({always_show_close:!1})})}),$(function(){$(".input-date").each(function(){var e=$(this);e.datetimepicker({locale:window.Admin.Settings.locale}).trigger("dp.change").on("dp.change",function(){e.change()})})}),$(function(){$(".input-select").each(function(){var $self=$(this);if(!$self.data("select2")){var options=$.extend({},$self.data("widgetOptions")||{}),customize=$self.data("widgetCustomizeOptions"),isDynamic=$self.data("dynamic"),dynOptions=$self.data("dynamicOptions"),customizeDynOptions=$self.data("customizeDynamicOptions");if($self.hasClass("input-taggable")&&(options.tags=!0),isDynamic&&(dynOptions=function(){var r=$.extend({},{"static":null,cache:!0,perPage:10,minInputLength:2,itemsProperty:"items",totalCountProperty:"total_count",dependency:{},delay:500,termParam:"q",pageParam:"page",params:null,value:null,findByIdUrl:null,idParam:"id",idParamSep:",",isItemTuple:!1,prepareItems:function(e){for(var t=e.items,n=0;n<t.length;n++)e.item=t[n],e.itemIndex=n,t[n]=e.prepareItem(e);return t.filter(function(e){return e&&(e.id||e.children)}),t},prepareItem:function(e){return e.item},prepareItemTuple:function(e){var t=e.item,n={id:t[0],text:t[1]};return 3==t.length&&(n.children=t[2]),n}},dynOptions),dep,k;if(r["static"]&&!$.isArray(r["static"])&&(r["static"]=eval(r["static"])),r.dependency){for(k in r.dependency)/^\d+$/.test(k)&&(r.dependency[r.dependency[k]]=r.dependency[k],delete r.dependency[k]);var d={qs:{},fields:{},prepare:function(e){var t;for(t in this.qs)e[t]=this.getQSValue(t);for(t in this.fields)e[t]=this.getFieldValue(t)},getField:function(e){return this.getFieldEl(this.fields[e])},getFieldEl:function(e){return $self.closest("form").find(e)},getFieldValue:function(e){return this.getField(e).val()},getFields:function(){var e,t=[];for(e in this.fields)t[t.length]=this.getField(e);return t},getQSValue:function(e){return $.url.param(e)},forEachFields:function(e){var t,n=this.getFields();for(t=0;t<n.length;t++)e(n[t])}};for(k in r.dependency)dep=r.dependency[k],":"==dep[0]?d.qs[k]=dep.substr(1):"@"==dep[0]?d.fields[k]=dep.substr(1):d.fields[k]="#"+dep;r.dependencies=d}return r}(),customizeDynOptions&&(customizeDynOptions=eval(customizeDynOptions),dynOptions=customizeDynOptions(dynOptions)),$self.data("dynOptionsObj",dynOptions),dynOptions.dependencies.forEachFields(function(e){e.change(function(){$self.val($self.data("default")||null).trigger("change")})}),dynOptions["static"]?options.data=eval(dynOptions["static"]):(options.ajax={url:function(e){return e.hasOwnProperty(dynOptions.idParam)?dynOptions.findByIdUrl||dynOptions.url:dynOptions.url},dataType:"json",delay:dynOptions.delay,data:function(e){var t=$.extend({},e,dynOptions.params||{});e.hasOwnProperty("term")&&(delete t.term,t[dynOptions.termParam]=e.term),e.hasOwnProperty("page")&&(delete t.term,t[dynOptions.pageParam]=e.page);try{delete t._query}catch(n){}return dynOptions.dependencies.prepare(t),t},processResults:function(data,params){params.page=params.page||1;var itemsProperty=dynOptions.itemsProperty.split("."),total=eval("data."+dynOptions.totalCountProperty),items=data,i;for(i=0;i<itemsProperty.length;i++)items=items[itemsProperty[i]];var preparer={options:dynOptions,data:data,params:params,prepareItem:dynOptions.isItemTuple?dynOptions.prepareItemTuple:dynOptions.prepareItem,prepareItems:function(e,t){for(var n,i,a=e.parentItem,r=0;r<t.length;r++)n=e.item=t[r],e.itemIndex=r,i=e.prepareItem(e),i&&(i.children?(e.parentItem=i,i.children=e.prepareItems(e,i.children),e.parentItem=a,i.children||(i=null)):i.id||(i=null),i&&!i.text&&(i.text="** EMPTY LABEL **"),t[r]=i);return t=t.filter(function(e){return e})}};return items=preparer.prepareItems(preparer,items),{results:items,params:params,pagination:{more:params.page*dynOptions.perPage<total}}},cache:dynOptions.cache},options.minimumInputLength=dynOptions.minInputLength),options.escapeMarkup&&"string"==$.type(options.escapeMarkup)&&(options.escapeMarkup=eval(options.escapeMarkup)),options.templateResult&&"string"==$.type(options.templateResult)&&(options.templateResult=eval(options.templateResult)),options.templateSelection&&"string"==$.type(options.templateSelection)&&(options.templateSelection=eval(options.templateSelection))),customize&&(customize=eval(customize),options=customize(options)),$self.select2(options),isDynamic&&dynOptions.value){var s=$self.data("select2"),params={};params[dynOptions.idParam]=$.isArray(dynOptions.value)?dynOptions.value.join(dynOptions.idParamSep):dynOptions.value.toString(),dynOptions.minInputLength>0,s.dataAdapter.minimumInputLength&&(s.dataAdapter.minimumInputLength*=-1),s.dataAdapter.query(params,function(e){var t,n=[];s.dataAdapter.minimumInputLength<0&&(s.dataAdapter.minimumInputLength*=-1),t=$.isArray(dynOptions.value)?function(e,a){i.hasOwnProperty(a.id)&&(n[n.length]=a),a.children&&$.each(a.children,t)}:function(e,i){dynOptions.value==i.id&&(n[n.length]=i),i.children&&$.each(i.children,t)};var i={};$.each(dynOptions.value,function(e,t){null!==t&&(i[t]=t)}),$.each(e.results,t),$.each(n,function(e,t){s.selection.container.trigger("select",{data:t})})})}}})}),$(function(){$(".imageUpload").each(function(e,t){var n=$(t),i=n.closest(".form-group"),a=n.find(".errors"),r=n.find(".no-value"),s=n.find(".has-value"),o=n.find(".thumbnail img.has-value"),d=n.find(".imageValue"),l=new Flow({target:n.data("target"),testChunks:!1,chunkSize:1073741824,query:{_token:n.data("token")}});l.assignBrowse(n.find(".imageBrowse"),!1,!0),l.on("filesSubmitted",function(e){l.upload()}),l.on("fileSuccess",function(e,t){l.removeFile(e),a.html(""),i.removeClass("has-error");var n=$.parseJSON(t);o.attr("src",n.url),s.find("span").text(n.value),d.val(n.value),r.addClass("hidden"),s.removeClass("hidden")}),l.on("fileError",function(e,t){l.removeFile(e);var n=$.parseJSON(t),r="";$.each(n,function(e,t){r+='<p class="help-block">'+t+"</p>"}),a.html(r),i.addClass("has-error")}),n.find(".imageRemove").click(function(){d.val(""),r.removeClass("hidden"),s.addClass("hidden")})})}),$(function(){$(".imageUploadMultiple").each(function(e,t){var n=$(t),i=n.closest(".form-group"),a=n.find(".form-group"),r=n.find(".errors"),s=n.find(".imageValue"),o=new Flow({target:n.data("target"),testChunks:!1,chunkSize:1073741824,query:{_token:n.data("token")}}),d=function(){var e=[];n.find("img[data-value]").each(function(){e.push($(this).data("value"))}),s.val(e.join(","))};o.assignBrowse(n.find(".imageBrowse")),o.on("filesSubmitted",function(e){o.upload()}),o.on("fileSuccess",function(e,t){o.removeFile(e),r.html(""),i.removeClass("has-error");var n=$.parseJSON(t);a.append($($("#thumbnail_template").html()).find("img").attr("src",n.url).attr("data-value",n.value)),d()}),o.on("fileError",function(e,t){o.removeFile(e);var n=$.parseJSON(t),a="";$.each(n,function(e,t){a+='<p class="help-block">'+t+"</p>"}),r.html(a),i.addClass("has-error")}),n.on("click",".imageRemove",function(e){e.preventDefault(),$(this).closest(".imageThumbnail").remove(),d()}),a.sortable({onUpdate:function(){d()}})})}),window.Admin.Components.add("ckeditor",function(){switchOn_handler=function(e,t){CKEDITOR.disableAutoInline=!0;var t=$.extend({},t);return CKEDITOR.replace(e,t)},switchOff_handler=function(e,t){e.destroy()},exec_handler=function(e,t,n,i){switch(t){case"insert":e.insertText(i);break;case"changeHeight":e.resize("100%",i)}},window.Admin.WYSIWYG.add("ckeditor",switchOn_handler,switchOff_handler,exec_handler)}).add("tinymce",function(){switchOn_handler=function(e,t){var t=$.extend({selector:"#"+e},t);return tinymce.init(t)},switchOff_handler=function(e,t){e.destroy()},exec_handler=function(e,t,n,i){switch(t){case"insert":e.insertContent(i)}},window.Admin.WYSIWYG.add("tinymce",switchOn_handler,switchOff_handler,exec_handler)}).add("simplemde",function(){switchOn_handler=function(e,t){var t=$.extend({element:$("#"+e)[0]},t);return new SimpleMDE(t)},switchOff_handler=function(e,t){e.destroy()},exec_handler=function(e,t,n,i){switch(t){case"insert":e.codemirror.replaceSelection(i)}},window.Admin.WYSIWYG.add("simplemde",switchOn_handler,switchOff_handler,exec_handler)}),$(function(){var e=$('meta[name="site-url"]').attr("content");if(!e)throw"[laravelrus/SleepingOwlAdmin] The header meta 'site-url' does not exists or value is empty.";$.ajaxSetup({beforeSend:function(t,n){var i=n.url.substr(0,e.length);i==e&&t.setRequestHeader("X-CSRF-TOKEN",window.Admin.Settings.token)}}),$('form[data-type="display-actions"]').on("submit",function(e){var t=$(this),n=$(e.target.action),i=$(".adminCheckboxRow").filter(":checked");i.length||e.preventDefault(),this.action=n.data("action"),this.method=n.data("method"),i.each(function(){t.append('<input type="hidden" name="id[]" value="'+$(this).val()+'" />')})}),$(".inline-editable").editable(),window.Admin.Components.init(),window.Admin.Controllers.call()});